/*= Windows10 - UWP like color ======================================================*/
@media (-moz-platform: windows) {
  :root:not(:-moz-lwtheme) {
    --win-text-color: rgb(0, 0, 0);
    --win-bgcolor: rgb(218, 218, 218);
    --win-disabled-color: rgb(145, 145, 145);
    --win-disabled-bgcolor: transparent;
    --win-hover-bgcolor: rgb(211, 223, 233);
    --win-hover-active-bgcolor: rgb(191, 203, 213);
    --win-field-bgcolor: rgb(255, 255, 255);
    --win-component-bgcolor: rgb(247, 247, 247);
    --win-border-color: rgb(190, 190, 190);
    --win-tab-separator-color: linear-gradient(to right, currentColor 50%, color-mix(in srgb, currentColor, transparent 25%));
    --win-sidebar-bgcolor: var(--win-field-bgcolor);
    --win-sidebar-hover-bgcolor: rgb(242, 242, 242);
    --win-sidebar-button-hover-bgcolor: rgb(238, 238, 238);
    --win-sidebar-button-hover-active-bgcolor: rgb(193, 193, 193);
    --win-button-border: rgb(107, 107, 107);
    --win-button-bgcolor: rgb(238, 238, 238);
    --win-button-hover-bgcolor: rgb(230, 230, 230);
    --win-button-active-bgcolor: rgb(242, 242, 242);
    --win-shortcut-text-color: #757575;
    --win-error-color: #b31616;
    --win-red-border-color: #ff4343;
    --win-accent-color: rgb(0, 120, 212);
    --win-accent-foreground-color: AccentColorText;
    --win-accent-content-color: rgb(0, 96, 169);
    --win-accent-hover-color: rgb(0, 108, 190);
    --win-accent-active-color: rgb(22, 131, 216);
    --win-toolbarbutton-hover-background: rgb(220, 220, 220);
    --win-toolbarbutton-active-background: rgb(207, 207, 207);
    --win-toolbar-field-bgcolor: rgb(255, 255, 255);
    --win-toolbar-field-focus-border-color: rgb(143, 177, 229);
    --win-toolbar-field-hover-border-color: rgb(204, 204, 204);
    --win-focus-outline-color: rgb(131, 131, 131);
    --win-checkbox-border-color: rgb(146, 146, 146);
    --win-checkbox-unchecked-hover-bgcolor: var(--win-field-bgcolor);
    --win-checkbox-unchecked-active-bgcolor: rgb(169, 169, 169);
    --win-checkbox-checked-bgcolor: rgb(118, 118, 118);
    --win-checkbox-checked-hover-bgcolor: rgb(97, 97, 97);
    --win-checkbox-checked-active-bgcolor: rgb(131, 131, 131);
    --win-urlbar-box-hover-bgcolor: rgb(242, 242, 242);
    --win-urlbar-popup-accent-color: rgb(22, 83, 127);
    --win-urlbar-popup-hover-active-bgcolor: rgb(229, 229, 229);
  }
  @media (-moz-bool-pref: "userChrome+Content.compatibility.os.win11") {
    :root:not(:-moz-lwtheme) {
      --win-text-color: #1a1a1a;
      --win-bgcolor: #e8e8e8;
      --win-hover-bgcolor: #eaeaea; /* also button-bgcolor */
      --win-disabled-color: #9f9f9f;
      --win-hover-active-bgcolor: #d9d9d9;
      --win-button-hover-bgcolor: #d9d9d9;
      --win-button-active-bgcolor: rgba(46, 46, 46, 0.66);
      --win-component-bgcolor: #f8f8f8;
      --win-border-color: #e9e9e9;
      --win-tab-separator-color: #dadada;
      --win-sidebar-bgcolor: #ffffff;
      --win-button-border: var(--win-border-color);
      --win11-chrome-separator-color: #d6d6d6;
      --win11-tab-border-color: #dadada;
    }
  }
  /*- Separator --------------------------------------------------------------*/
  /*- Proton Tab Selected ----------------------------------------------------*/
  /*- Menu -------------------------------------------------------------------*/
  /*- Toolbar ----------------------------------------------------------------*/
  /*- Sidebar ----------------------------------------------------------------*/
  /*- Panel ------------------------------------------------------------------*/
  /*- Others -----------------------------------------------------------------*/
  /* For overwrite */
}
@media (-moz-platform: windows) and (prefers-color-scheme: dark) {
  :root:not(:-moz-lwtheme) {
    --win-text-color: rgb(255, 255, 255);
    --win-bgcolor: rgb(99, 99, 99);
    --win-disabled-color: #747474;
    --win-disabled-bgcolor: transparent;
    --win-hover-bgcolor: rgb(97, 97, 97);
    --win-hover-active-bgcolor: rgb(69, 69, 69);
    --win-field-bgcolor: rgb(74, 74, 74);
    --win-component-bgcolor: rgb(59, 59, 59);
    --win-border-color: #5b5b5b;
    --win-tab-separator-color: linear-gradient(to right, color-mix(in srgb, currentColor 35%, currentColor 35%), color-mix(in srgb, currentColor 50%, currentColor 50%));
    --win-sidebar-bgcolor: var(--win-field-bgcolor);
    --win-sidebar-hover-bgcolor: #353535;
    --win-sidebar-button-hover-bgcolor: rgb(97, 97, 97);
    --win-sidebar-button-hover-active-bgcolor: rgb(69, 69, 69);
    --win-button-border: rgb(110, 110, 110);
    --win-button-bgcolor: rgb(97, 97, 97);
    --win-button-hover-bgcolor: rgb(84, 84, 84);
    --win-button-active-bgcolor: rgb(72, 72, 72);
    --win-shortcut-text-color: #adadad;
    --win-error-color: #ffb900;
    --win-red-border-color: #ff4343;
    --win-accent-color: rgb(0, 108, 190);
    --win-accent-content-color: rgb(117, 182, 220);
    --win-accent-hover-color: rgb(0, 120, 212);
    --win-accent-active-color: rgb(0, 92, 163);
    --win-toolbarbutton-hover-background: rgb(74, 74, 74);
    --win-toolbarbutton-active-background: rgb(85, 85, 85);
    --win-toolbar-field-bgcolor: rgb(43, 43, 43);
    --win-toolbar-field-focus-border-color: rgb(99, 173, 229);
    --win-toolbar-field-hover-border-color: rgb(101, 101, 101);
   --win-focus-outline-color: rgb(131, 131, 131);
    --win-checkbox-border-color: rgb(133, 133, 133);
    --win-checkbox-unchecked-hover-bgcolor: var(--win-field-bgcolor);
    --win-checkbox-unchecked-active-bgcolor: rgb(110, 110, 110);
    --win-checkbox-checked-bgcolor: rgb(167, 167, 167);
    --win-checkbox-checked-hover-bgcolor: rgb(188, 188, 188);
    --win-checkbox-checked-active-bgcolor: rgb(154, 154, 154);
    --win-urlbar-box-hover-bgcolor: rgb(56, 56, 56);
    --win-urlbar-popup-accent-color: rgb(143, 196, 236);
    --win-urlbar-popup-hover-active-bgcolor: rgb(69, 69, 69);
  }
  @media (-moz-bool-pref: "userChrome+Content.compatibility.os.win11") {
    :root:not(:-moz-lwtheme) {
      --win-bgcolor: #202020;
      --win-hover-bgcolor: #383838; /* also button-bgcolor */
      --win-disabled-color: #797979;
      --win-hover-active-bgcolor: #454545; /* also button-active-color */
      --win-button-hover-bgcolor: #454545;
      --win-button-active-bgcolor: rgba(46, 46, 46, 0.66);
      --win-field-bgcolor: #232323;
      --win-component-bgcolor: #2c2c2c;
      --win-border-color: #3d3d3d;
      --win-tab-separator-color: #323232;
      --win-sidebar-bgcolor: var(--win-component-bgcolor);
      --win-button-border: var(--win-border-color);
      --win11-chrome-separator-color: #3a3a3a;
      --win11-tab-border-color: #1d1d1d;
    }
  }
}
@media (-moz-platform: windows) {
  :root:not(:-moz-lwtheme) {
    /* Buttons */
    --button-color: var(--win-text-color) !important;
    --button-bgcolor: var(--win-button-bgcolor) !important;
    --button-hover-bgcolor: var(--win-button-hover-bgcolor) !important;
    --button-active-bgcolor: var(--win-button-active-bgcolor) !important;
    --button-primary-color: var(--win-accent-foreground-color) !important;
    --button-primary-bgcolor: var(--win-accent-color) !important;
    --button-primary-hover-bgcolor: var(--win-accent-hover-color) !important;
    --button-primary-active-bgcolor: var(--win-accent-active-color) !important;
    /* Menu */
    --menu-color: var(--win-text-color) !important;
    --menu-background-color: var(--win-field-bgcolor) !important;
    --menu-border-color: var(--win-bgcolor) !important;
    --menu-disabled-color: var(--win-disabled-color) !important;
    --menuitem-hover-background-color: var(--win-hover-bgcolor) !important;
    --menuitem-disabled-hover-background-color: var(--win-disabled-bgcolor) !important;
    /* Tabs */
    --tab-selected-bgcolor: unset !important;
    --tab-icon-overlay-fill: var(--win-text-color) !important;
    --tab-icon-overlay-stroke: var(--win-field-bgcolor) !important;
    --tab-line-color: AccentColor !important;
    --tabs-border-color: transparent !important;
    /* Toolbar */
    --toolbar-color: var(--win-text-color) !important;
    --toolbar-bgcolor: var(--win-component-bgcolor) !important;
    --toolbar-non-lwt-textcolor: var(--win-text-color) !important;
    --toolbar-non-lwt-bgcolor: var(--win-component-bgcolor) !important;
    --toolbar-field-color: var(--win-text-color) !important;
    --toolbar-field-background-color: var(--win-toolbar-field-bgcolor) !important;
    --toolbar-field-border-color: var(--win-bgcolor) !important;
    --toolbar-field-focus-color: var(--win-text-color) !important;
    --toolbar-field-focus-background-color: var(--win-toolbar-field-bgcolor) !important;
    --toolbar-field-focus-border-color: var(--win-toolbar-field-focus-border-color) !important;
    --toolbarseparator-color: var(--win-tab-separator-color) !important;
    /* Toolbarbutton */
    --toolbarbutton-hover-background: var(--win-toolbarbutton-hover-background) !important;
    --toolbarbutton-active-background: var(--win-toolbarbutton-active-background) !important;
    --toolbarbutton-icon-fill: var(--win-text-color) !important;
    --toolbarbutton-icon-fill-attention: var(--win-accent-color) !important;
    /* Urlbar */
     --urlbar-popup-action-color: var(--win-text-color) !important;
    --urlbar-box-text-color: var(--win-text-color) !important;
    --urlbarView-highlight-color: var(--win-text-color) !important;
    --urlbarView-action-color: var(--win-text-color) !important;
    --urlbarView-result-button-selected-color: var(--win-text-color) !important;
     --urlbar-popup-url-color: var(--win-accent-content-color) !important;
    --urlbar-box-bgcolor: transparent !important;
     --urlbar-box-hover-bgcolor: var(--win-urlbar-box-hover-bgcolor) !important;
    --urlbarView-hover-background: var(--win-urlbar-box-hover-bgcolor) !important;
     --urlbar-box-active-bgcolor: var(--win-urlbar-popup-hover-active-bgcolor) !important;
    --urlbarView-highlight-background: var(--win-urlbar-popup-hover-active-bgcolor) !important;
    --urlbar-box-focus-bgcolor: transparent !important;
     /* --urlbar-icon-fill-opacity: 1 !important; */
    /* Checkbox */
    --checkbox-checked-color: var(--win-accent-foreground-color) !important;
    --checkbox-checked-bgcolor: var(--win-checkbox-checked-bgcolor) !important;
    --checkbox-unchecked-bgcolor: var(--win-field-bgcolor) !important;
    --checkbox-unchecked-hover-bgcolor: var(--win-checkbox-unchecked-hover-bgcolor) !important;
    --checkbox-unchecked-active-bgcolor: var(--win-checkbox-unchecked-active-bgcolor) !important;
    --checkbox-border-color: var(--win-checkbox-border-color) !important;
    --checkbox-checked-hover-bgcolor: var(--win-checkbox-checked-hover-bgcolor) !important;
    --checkbox-checked-active-bgcolor: var(--win-checkbox-checked-active-bgcolor) !important;
    --checkbox-checked-border-color: transparent !important;
    /* Arrowpanel */
    --arrowpanel-color: var(--win-text-color) !important;
    --arrowpanel-background: var(--win-field-bgcolor) !important;
    --arrowpanel-dimmed: color-mix(in srgb, currentColor 12%, transparent) !important;
    --arrowpanel-dimmed-further: color-mix(in srgb, currentColor 20%, transparent) !important;
    --arrowpanel-dimmed-even-further: color-mix(in srgb, currentColor 27%, transparent) !important;
    /* Panel */
    --panel-banner-item-color: var(--win-text-color) !important;
    --panel-banner-item-background-color: var(--win-bgcolor) !important;
    --panel-banner-item-hover-bgcolor: var(--win-hover-bgcolor) !important;
    --panel-banner-item-active-bgcolor: var(--win-hover-active-bgcolor) !important;
    --panel-disabled-color: var(--win-disabled-color) !important;
    --panel-shortcut-color: var(--win-shortcut-text-color) !important;
    --panel-description-color: var(--win-shortcut-text-color) !important;
    --panelview-toolbarbutton-focus-box-shadow: inset 0 0 0 2px var(--focus-outline-color) !important;
    /* AutoComplete Popup */
    --autocomplete-popup-color: var(--win-accent-content-color) !important;
    --autocomplete-popup-background: var(--win-field-bgcolor) !important;
    --autocomplete-popup-hover-background: var(--win-button-hover-bgcolor) !important;
    --autocomplete-popup-highlight-color: var(--win-text-color) !important;
    --autocomplete-popup-highlight-background: var(--win-sidebar-hover-bgcolor) !important;
    --autocomplete-popup-separator-color: var(--win-button-border) !important;
    /* Download */
    --download-progress-fill-color: var(--win-accent-content-color) !important;
    --download-progress-paused-color: var(--win-disabled-color) !important;
    --download-progress-flare-color: rgba(255, 255, 255, 0.75) !important;
    /* Input */
    --input-color: var(--win-text-color) !important;
    --input-bgcolor: var(--win-field-bgcolor) !important;
    --input-border-color: var(--win-button-border) !important;
    /* Error Color */
    --input-error-border-color: var(--win-error-color) !important;
    --error-text-color: var(--win-error-color) !important;
    /* Other */
    --lwt-text-color: var(--win-text-color) !important;
    --lwt-accent-color: var(--win-bgcolor) !important;
    --chrome-content-separator-color: var(--win-bgcolor) !important;
    --focus-outline-color: var(--win-focus-outline-color) !important;
  }
  navigator-toolbox:not(:-moz-lwtheme) {
    background: var(--lwt-accent-color) !important;
  }
  /*- Separator ----------------------------------------------------------*/
  :root:is(#main-window):not(:-moz-lwtheme) {
    --arrowpanel-border-color: var(--win-bgcolor) !important;
    --panel-separator-color: var(--win-bgcolor) !important;
  }
  @media (-moz-bool-pref: "userChrome+Content.compatibility.os.win11") {
    :root:not(:-moz-lwtheme) {
      --chrome-content-separator-color: var(--win11-chrome-separator-color) !important;
    }
    #nav-bar {
      --lwt-tabs-border-color: var(--win11-tab-border-color) !important;
    }
  }
  /*- Menu ---------------------------------------------------------------*/
  html#main-window menupopup:not(:-moz-lwtheme) {
    --menu-color: var(--win-text-color) !important;
    --menu-background-color: var(--win-field-bgcolor) !important;
    --menu-border-color: var(--win-bgcolor) !important;
    --menuitem-hover-background-color: var(--win-hover-bgcolor) !important;
    --menu-disabled-color: var(--win-disabled-color) !important;
    --menuitem-disabled-hover-background-color: var(--win-disabled-bgcolor) !important;
  }
  /*- Toolbar ------------------------------------------------------------*/
  :root:not(:-moz-lwtheme) #titlebar {
    --button-hover-bgcolor: var(--win-sidebar-button-hover-bgcolor);
    --button-active-bgcolor: var(--win-sidebar-button-hover-active-bgcolor);
    --toolbarbutton-hover-background: var(--win-sidebar-button-hover-bgcolor);
    --toolbarbutton-active-background: var(--win-sidebar-button-hover-active-bgcolor);
  }
  /*- Address bar --------------------------------------------------------*/
  @media not (prefers-contrast) {
    :root:not(:-moz-lwtheme) #urlbar {
      --urlbar-box-bgcolor: var(--toolbar-field-focus-background-color) !important;
    }
  }
  /*- Sidebar ------------------------------------------------------------*/
  #sidebar-box:not([lwt-sidebar]) {
    appearance: none !important;
  }
  :root:not(:-moz-lwtheme) #sidebar-box {
    --sidebar-background-color: var(--win-sidebar-bgcolor) !important;
    --sidebar-text-color: var(--win-text-color) !important;
    --sidebar-border-color: var(--win-border-color) !important;
  }
  @media (prefers-color-scheme: dark) {
    .sidebar-panel[style*="--lwt-sidebar-background-color: rgb(56, 56, 61); --lwt-sidebar-text-color: rgba(249, 249, 250, 1);"],
    html[lwt-sidebar][style*="--lwt-sidebar-background-color: rgb(56, 56, 61); --lwt-sidebar-text-color: rgba(249, 249, 250, 1);"],
    body[lwt-sidebar][style*="--lwt-sidebar-background-color: rgb(56, 56, 61); --lwt-sidebar-text-color: rgba(249, 249, 250, 1);"] {
      /* Only darkmode has more: --newtab-background-color-secondary: rgba(66, 65, 77, 1); */
      --lwt-sidebar-background-color: var(--win-sidebar-bgcolor) !important; /* transparent */
      --lwt-sidebar-text-color: var(--win-text-color) !important;
      --panel-separator-color: var(--win-border-color) !important;
    }
  }
  /*- Panel --------------------------------------------------------------*/
  :root:not(:-moz-lwtheme) .subviewbutton {
    --button-hover-bgcolor: var(--win-hover-bgcolor) !important;
    --button-active-bgcolor: var(--win-hover-active-bgcolor) !important;
  }
  :root:not(:-moz-lwtheme) 
    toolbarbutton.subviewbutton:not([disabled], [open], :active, #appMenu-fxa-label2, #appMenu-zoomReduce-button2, #appMenu-zoomReset-button2, #appMenu-zoomEnlarge-button2, #appMenu-fullscreen-button2):is(:hover),
  :root:not(:-moz-lwtheme) 
    #appMenu-fullscreen-button2:not([disabled], [open], :active):is(:hover) > .toolbarbutton-icon {
      background-color: var(--panel-banner-item-hover-bgcolor) !important;
  }
  :root:not(:-moz-lwtheme)
    toolbarbutton.subviewbutton:not([disabled], #appMenu-fxa-label2, #appMenu-zoomReduce-button2, #appMenu-zoomReset-button2, #appMenu-zoomEnlarge-button2, #appMenu-fullscreen-button2):is([open], :hover:active),
  :root:not(:-moz-lwtheme) 
    #appMenu-fullscreen-button2:not([disabled]):is(:hover:active) > .toolbarbutton-icon {
      background-color: var(--panel-banner-item-active-bgcolor) !important;
  }
  /*- Others -------------------------------------------------------------*/
  /* For overwrite */
  :root[lwtheme-mozlightdark]:not([lwthemetextcolor="bright"]):not(:-moz-lwtheme), /* Legacy */
  :root:not(:-moz-lwtheme) {
  /* Light Theme */
    --lwt-accent-color: var(--win-bgcolor) !important;
  }
  @media (prefers-color-scheme: dark) {
    :root[lwt-default-theme-in-dark-mode][lwthemetextcolor="bright"] {
      --toolbar-bgcolor: var(--win-component-bgcolor) !important; /* Original: rgba(43, 42, 51, 1) */
    }
  }
  #tabbrowser-tabs:not([movingtab])
    > #tabbrowser-arrowscrollbox
    > .tabbrowser-tab
    > .tab-stack
    > .tab-background[multiselected]:not([selected]):not(:-moz-lwtheme),
  :root[lwtheme-mozlightdark]  /* Legacy */
    #tabbrowser-tabs:not([movingtab])
    > #tabbrowser-arrowscrollbox
    > .tabbrowser-tab
    > .tab-stack
    > .tab-background[multiselected]:not([selected]),
  :root:is([style*="--lwt-accent-color: rgb(240, 240, 244); --lwt-text-color: rgba(21, 20, 26);"], [style*="--lwt-accent-color: rgb(28, 27, 34); --lwt-text-color: rgba(251, 251, 254);"])
       #tabbrowser-tabs:not([movingtab])
                           > #tabbrowser-arrowscrollbox
                           > .tabbrowser-tab
                           > .tab-stack
                           > .tab-background[multiselected]:not([selected]) {
    background-image: linear-gradient(
        color-mix(in srgb, currentColor 11%, transparent),
        color-mix(in srgb, currentColor 11%, transparent)
      ),
      linear-gradient(var(--toolbar-bgcolor), var(--toolbar-bgcolor)), var(--lwt-header-image, none) !important;
  }
}
/*= Windows10 - Titlebar accent color ===============================================*/
@media (-moz-platform: windows) and (-moz-windows-accent-color-in-titlebar) {
  /* Tab Bar */
  :root[tabsintitlebar]:not(:-moz-window-inactive, :-moz-lwtheme) .titlebar-color {
    color: AccentColorText;
    background-color: AccentColor;
  }
  :root[tabsintitlebar]:-moz-window-inactive:not(:-moz-lwtheme) .titlebar-color {
    background-color: color-mix(in srgb, AccentColor 65%, white); /* 70% is like Microsoft Edge */ 
  }
  :root[tabsintitlebar]:not(:-moz-window-inactive, :-moz-lwtheme) .toolbar-items {
    --toolbarbutton-icon-fill: currentColor;
    --toolbarbutton-hover-background: color-mix(in srgb, AccentColorText 10%, transparent);
    --toolbarbutton-active-background: color-mix(in srgb, AccentColorText 15%, transparent);
  }
}
